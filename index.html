
<html dir="rtl" lang="en">
<head>
    <meta charset="UTF-8"></meta>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"></meta>
    <meta http-equiv="Content-Security-Policy" content="
    default-src 'self' https://www.egybest.co.in https://turkifyy.netlify.app https://beinmatch.pro https://www.jeuxdefriv2015.com https://tv.garden https://s.3cktv.com;
    script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.egybest.co.in;
    style-src 'self' 'unsafe-inline' https://www.egybest.co.in;
    img-src 'self' data: https://www.egybest.co.in;
    frame-src 'self' https://www.egybest.co.in https://turkifyy.netlify.app https://beinmatch.pro https://www.jeuxdefriv2015.com https://tv.garden https://s.3cktv.com;
"></meta>
    <meta content="Explore EgyBest: The best platform to stream and download movies and series for free in HD quality, including Arabic subtitles. Watch trending content like Avatar, John Wick, and more." name="description"></meta>
    <meta content="EgyBest,إيجي بيست,Free movie streaming, Download series, Arabic subtitles, افلام مترجمة, مسلسلات مترجمة , فيلم مترجم , مسلسل مترجم , Squid game season 2 ,Latest movies, Avatar: The Way of Water, John Wick 4, Squid Game, Breaking Bad" name="keywords"></meta>
    <meta content="turkify" name="author"></meta>
    <title>EgyBest: Stream and Download Free Movies & Series</title>
    <meta content="EgyBest: Free Movies &amp; Series Streaming" property="og:title"></meta>
    <meta content="Discover EgyBest, the ultimate platform for free movie and series streaming in HD with Arabic subtitles. Explore trending content today!" property="og:description"></meta>
    <meta content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgXV-ZxMo3WqbJXAmhUxOt_mTe1S2zI7ipgzbEuGtFCoBBi4fN0f0vPzCTqfVmUTP0IwJZkAH36PCp5nw99nFIMAIjWjSU98W6xlA7Ar6i24CHGeXB-J6rSndTVmeSMVOPVJxvDoRGc2HXT0D2-W_ldQDPNuBSFwCRTKRH_bGU0bE11XphxgxJbetQS6VY/s1200/20250126_192057.png" property="og:image"></meta>
    <meta content="https://example.com/egybest" property="og:url"></meta>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "EgyBest - Free Movies and Series",
        "description": "EgyBest is the leading platform offering free streaming and downloading of movies and series with Arabic subtitles in HD quality.",
        "url": "https://example.com/egybest",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://example.com/egybest"
        },
        "image": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgXV-ZxMo3WqbJXAmhUxOt_mTe1S2zI7ipgzbEuGtFCoBBi4fN0f0vPzCTqfVmUTP0IwJZkAH36PCp5nw99nFIMAIjWjSU98W6xlA7Ar6i24CHGeXB-J6rSndTVmeSMVOPVJxvDoRGc2HXT0D2-W_ldQDPNuBSFwCRTKRH_bGU0bE11XphxgxJbetQS6VY/s1200/20250126_192057.png",
        "author": {
            "@type": "Person",
            "name": "Turkify"
        },
        "publisher": {
            "@type": "Organization",
            "name": "EgyBest",
            "logo": {
                "@type": "ImageObject",
                "url": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiqayxhA1t69hf3GXZ5DhtnCzhgzi6tKz0xkXy8i3SKzPQpmts4uBb6Y3PFygqbk5nfJH85qJJ6n_xlRyKjFhuXmEcFfQw1-TErfPISEXYu85XYAELXSMDRhDr8cwB0slw4rSjCW2WHlWOJm8DQfiGr9GHpiU6GzyG8WtuQTlEAIz4kyaUcXYTeDlE5O_Y/s500/20241224_200907.png"
            }
        }
    }
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"></link>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"></link>
        <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.rtl.min.css" rel="stylesheet"></link>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"></link>
 



    <style>
        :root {
            --primary-color: #0070ff;
            --secondary-color: #00adef;
            --dark-bg: #121212;
            --text-color: #ffffff;
            --modal-bg: rgba(0, 0, 0, 0.9);
            --content-bg: #ffffff;
            --whatsapp-color: #25d366;
            --success-color: #28a745;
            --offline-bg: #EEF7FF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
        }

        .logo-container {
            position: fixed;
            top: 0px;
            left: 0px;
            z-index: 41000; /* Updated z-index */
            display: flex;
            align-items: center;
        }

        .logo-container img {
            width: 150px;
            height: auto;
            transition: transform 0.3s ease;
        }

        @media (max-width: 768px) {
            .logo-container img {
                width: 185px;
            }
        }

        @media (max-width: 480px) {
            .logo-container img {
                width: 175px;
            }
        }

        .logo-container:hover img {
            transform: scale(1.1);
        }

        .orientation-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 40000;
            text-align: center;
        }

        .timer-circle {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: #808080;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            z-index: 40000;
        }

        .ad-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 40000;
            backdrop-filter: blur(5px);
        }

        .ad-frame {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 900px;
            height: 85vh;
            border: none;
            border-radius: 24px;
            background: white;
        }

          .loading-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: white;
}

.share-modal, .success-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.05);
    z-index: 70000; /* تحديث z-index لضمان الظهور فوق كل العناصر */
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.share-modal.show, .success-modal.show {
    opacity: 1;
}

.share-content, .success-content {
    background: #EEF7FF; /* أسود مفتوح مريح للعين */
    padding: 2rem;
    border-radius: 10px;
    text-align: center;
    max-width: 90%;
    width: 400px;
    position: relative;
    transform: scale(0.9);
    transition: transform 0.3s ease;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 70001; /* أعلى من الخلفية */
}

.share-modal.show .share-content, .success-modal.show .success-content {
    transform: scale(1);
}

.share-title, .success-title {
    margin-bottom: 1.5rem;
    color: white; /* لون أبيض واضح */
    font-weight: bold;
    font-size: 1.2rem;
}

.share-buttons {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin-top: 1.5rem;
}

.share-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: none;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}

.share-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255,255,255,0.1);
    transform: scale(0);
    transition: transform 0.3s ease;
    border-radius: 50%;
}

.share-btn:hover::before {
    transform: scale(1);
}

.share-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.share-btn:active {
    transform: translateY(0);
}

.share-btn:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(0,0,0,0.2);
}

.whatsapp { background-color: var(--whatsapp-color); }

.share-progress {
    margin-top: 1.5rem;
    height: 4px;
    background: #eee;
    border-radius: 2px;
    overflow: hidden;
    display: none;
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--whatsapp-color), var(--whatsapp-color));
    width: 0%;
    transition: width 0.3s ease;
}

.tooltip {
    position: absolute;
    background: #333;
    color: white;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 0.8rem;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
}

.share-btn:hover .tooltip {
    opacity: 1;
}

.loading-spinner {
    display: none;
    width: 20px;
    height: 20px;
    border: 2px solid #fff;
    border-radius: 50%;
    border-top-color: transparent;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.success-message {
    color: var(--success-color);
    margin-top: 1rem;
    display: none;
}

.success-icon {
    font-size: 4rem;
    color: var(--success-color);
    margin-bottom: 1rem;
}

.slogan {
    font-size: 1.2rem;
    color: #007bff;
    font-weight: bold;
    margin-top: 1rem;
}

@media (max-width: 480px) {
    .share-content, .success-content {
        width: 95%;
        padding: 1.5rem;
    }
    
    .share-btn {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
    }

    .share-title, .success-title {
        color: white;
        font-size: 1.1rem;
    }
}

@media (prefers-reduced-motion: reduce) {
    .share-modal,
    .share-content,
    .share-btn,
    .progress-bar {
        transition: none;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --content-bg: #222;
        --modal-bg: rgba(0, 0, 0, 0.95);
    }

    .share-title, .success-title {
        color: white;
    }

    .share-progress {
        background: #444;
    }
}

        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .content-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 70px;
            z-index: 20000;
        }

        .video-iframe, .video-iframe1, .video-iframe2, .video-iframe3, .video-iframe4, .video-iframe5, .video-iframe6, .video-iframe7, .video-iframe9 {
            width: 100%;
            height: 100%;
            border: none;
            z-index: 40000;
        }

        .iframe-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            bottom: 70px;
            z-index: 40000;
        }
      
        
 
        .iframe-container.active {
            display: block;
        }

        /* Bottom navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #fff;
            z-index: 50000;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #333;
            font-size: 14px;
            padding: 10px;
            border-radius: 10px;
            transition: background 0.3s ease;
            position: relative;
        }

        .nav-item.active {
            color: #00C6FF;
        }

        .nav-item i {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: red;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 12px;
            display: inline-block;
            min-width: 20px; /* Ensure badge has a minimum width */
            text-align: center; /* Center text inside badge */
        }
 
        /* Custom backgrounds for each section */
     

     

        #dating-content {
            background: linear-gradient(135deg, #FF9A9E, #FAD0C4);
        }

        #football-content {
            background: linear-gradient(135deg, #4CAF50, #81C784);
        }

        #movies-content {
            background: #333;
        }

        #home-content {
            background: #EEF7FF;
        }

        #games-content {
            background: linear-gradient(135deg, #FFD700, #FFA500);
        }
      
        #recipes-content {

            background: linear-gradient(135deg, #FFA07A, #FF6347); 

         }
         
        #tv-content {
    background: linear-gradient(135deg, #FFA07A, #FF6347);
         }
         
        #earnmoney-content {

    background: linear-gradient(135deg, #FFA07A, #FF6347);

}
        #music-content {

    background: linear-gradient(135deg, #FFA07A, #FF6347);

}
      
        /* Offline page */
        .offline-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--offline-bg);
            z-index: 50000;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .offline-page i {
            font-size: 100px;
            color: #888;
        }

        .offline-page h1 {
            font-size: 24px;
            color: #333;
            margin-top: 20px;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 60000;
            display: none;
        }

        /* Responsive adjustments for bottom navigation */
        @media (max-width: 768px) {
            .nav-item {
                font-size: 12px;
                padding: 8px;
            }

            .nav-item i {
                font-size: 18px;
            }
        }

        @media (max-width: 480px) {
            .nav-item {
                font-size: 10px;
                padding: 5px;
            }

            .nav-item i {
                font-size: 16px;
            }
        }

        /* Responsive iframe adjustments */
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        #games-content iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

       /* General Styles */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #000, #222);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
         /* Container for the prompt */
        .swipe-up-prompt {
            text-align: center;
            color: white;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.35); /* 95% transparent black background */
            z-index: 45000; /* Ensure it's on top */
            transition: opacity 0.5s ease;
        }
            /* Hide the prompt */
        .swipe-up-prompt.hide {
            opacity: 0;
            pointer-events: none; /* Disable interactions */
        }

        /* Content Container */
        .content-container {
            text-align: center;
        }
          /* Main Image */
        .main-image {
            width: 100%;
            max-width: 250px; /* Smaller width */
            max-height: 250px; /* Smaller height */
            height: auto;
            margin: 0 auto;
            transform: translateX(20px); /* Move the image slightly to the right */
        }
          /* Text below the image */
        .swipe-text {
            margin-top: 20px;
            font-size: 24px; /* Larger font size */
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
          /* Main Content */

        .mainContent {

            display: none;

            padding: 20px;

            color: white;

            text-align: center;

        }

        /* Media Queries for Responsiveness */
        @media (max-width: 768px) {
            .main-image {
                max-width: 200px; /* Smaller for medium screens */
                max-height: 200px;
            }
                .swipe-text {
                font-size: 22px; /* Slightly smaller for medium screens */
            }
        }

        @media (max-width: 576px) {
            .main-image {
                max-width: 150px; /* Smaller for small screens */
                max-height: 150px;
            }
            .swipe-text {
                font-size: 20px; /* Smaller for small screens */
            }
        }
      
     iframe[src*="doubleclick.net"],
        iframe[src*="googleads"],
        iframe[src*="adsense"],
        iframe[src*="adservice.google.com"],
        div[id*="google_ads"],
        div[class*="GoogleActiveView"],
        div[class*="adsbygoogle"],
        ins.adsbygoogle {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            height: 0 !important;
            width: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
            border: none !important;
            position: absolute !important;
            top: -9999px !important;
            left: -9999px !important;
        }
      
        
    .next-episode-btn {
    display: none; /* الزر مخفي في البداية */
    position: fixed;
    bottom: 70px; /* فوق شريط التنقل السفلي */
    left: 15px; /* على الجهة اليسرى */
    background: linear-gradient(45deg, #e50914, #b20710); /* تدرج لوني Netflix */
    color: white;
    font-size: 16px;
    font-weight: bold;
    padding: 12px 24px; /* زيادة الحشوة قليلاً */
    border: 1px solid rgba(255, 255, 255, 0.2); /* حدود رقيقة */
    border-radius: 5px;
    cursor: pointer;
    z-index: 80000;
    transition: all 0.3s ease-in-out;
    box-shadow: 
        0 4px 6px rgba(0, 0, 0, 0.2), /* ظل خارجي */
        inset 0 1px 1px rgba(255, 255, 255, 0.1); /* ظل داخلي */
    transform: scale(1); /* حجم الزر الطبيعي */
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; /* خط مشابه لنتفليكس */
    text-transform: uppercase; /* تحويل النص إلى أحرف كبيرة */
    letter-spacing: 0.5px; /* تباعد بين الحروف */
    opacity: 0.9; /* شفافية خفيفة */
}

/* عند مرور الماوس فوق الزر */
.next-episode-btn:hover {
    background: linear-gradient(45deg, #ff0a16, #e50914); /* تدرج لوني أكثر إشراقًا */
    transform: scale(1.05); /* تكبير الزر قليلاً */
    box-shadow: 
        0 6px 8px rgba(0, 0, 0, 0.3), /* زيادة الظل الخارجي */
        inset 0 1px 1px rgba(255, 255, 255, 0.2); /* زيادة الظل الداخلي */
    border-color: rgba(255, 255, 255, 0.3); /* تغيير لون الحدود */
    opacity: 1; /* إزالة الشفافية عند المرور */
}

/* عند النقر على الزر */
.next-episode-btn:active {
    transform: scale(0.95); /* تصغير الزر قليلاً عند النقر */
    background: linear-gradient(45deg, #b20710, #e50914); /* تدرج لوني داكن */
    box-shadow: 
        0 2px 4px rgba(0, 0, 0, 0.2), /* تقليل الظل الخارجي */
        inset 0 1px 1px rgba(255, 255, 255, 0.1); /* تقليل الظل الداخلي */
}

/* زر متجاوب مع جميع الأجهزة */
@media (max-width: 768px) {
    .next-episode-btn {
        font-size: 14px;
        padding: 10px 20px;
    }
}

@media (max-width: 480px) {
    .next-episode-btn {
        font-size: 12px;
        padding: 8px 16px;
    }
}

      
    </style>
</head>
<body>

    
    <!-- Swipe Up Prompt -->
    <div class="swipe-up-prompt" id="swipeUpPrompt">
        <div class="content-container">
            <!-- Main Image -->
            <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEigiG15v3CQt7W6wSP5pjqgNEhqsLPn6sLX6EdoklnTSmKAdJAzY_xYWmic_fESaj3p8lKMs-8OznLBmvB6N89jFdNhmeB0w7YIrWaeLVz1hGdlyrc-FFKCMAwIDioNklCHq1Y0PwA48tJvH4Ub6zlCSOP4RP-Ix-y7_I9d9wfDiM4-kUaPSqnhrkP-OJs/s94/20250203_001719_copy_65x94.png" alt="Swipe Up Prompt" class="main-image"> 
            <!-- Swipe Up Text -->
            <div class="swipe-text">Swipe up for more</div>
        </div>
    </div>
         <!-- Main Content (Hidden until prompt is dismissed) -->
    <div id="mainContent" style="display: none;">
         </div>
 
    <div class="logo-container">
        <img alt="Logo" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgqjznUH-P61HXBnxKJYqou58d-u6cZXNBwkZekYOLyvKZ4W7uRM41IL9yD38O2YOZW1UUE-kQsU2WpxTHl22TBHG55cK1zVOjcCX0g4ywfCZrOSoVwugXYZV10lYXb2d59cZJkYLd37_9zMkXifc-qTL0fjeEElZULCWf-nOeVdjfDy9E9AELVQ3utw8o/s1340/logo.webp" /> 
    </div>

    <!-- Offline Page -->
    <div class="offline-page" id="offlinePage">
        <i class="fas fa-wifi"></i>
        <h1>لا يوجد اتصال بالإنترنت</h1>
    </div>

    <div class="iframe-container active" id="home-content">
        <iframe allowfullscreen="" class="video-iframe1" sandbox="allow-scripts allow-same-origin allow-forms" src="https://www.egybest.co.in/Movie_Series?order=popularity%3Adesc"></iframe> 
    </div>
gsg
    <div class="iframe-container" id="dating-content">
        <iframe allowfullscreen="" class="video-iframe3" sandbox="allow-scripts allow-same-origin allow-forms" src="https://turkifyy.netlify.app/t131.html"></iframe> 
    </div>
 
    <div class="iframe-container" id="football-content">
        <iframe allowfullscreen="" class="video-iframe2" sandbox="allow-scripts allow-same-origin allow-forms" src="https://beinmatch.pro/matches-today/"></iframe> 
    </div>

    <div class="iframe-container" id="movies-content">
        <iframe allowfullscreen="" class="video-iframe" sandbox="allow-scripts allow-same-origin allow-forms" src="https://www.egybest.co.in/Movie_Series?order=popularity%3Adesc"></iframe>
    </div>

    <div class="iframe-container" id="games-content">
        <iframe allowfullscreen="" class="video-iframe4" sandbox="allow-scripts allow-same-origin allow-forms" src="https://www.jeuxdefriv2015.com"></iframe>
    </div>

  <div class="iframe-container" id="tv-content">

    <iframe allowfullscreen class="video-iframe7" sandbox="allow-scripts allow-same-origin allow-forms" src="https://tv.garden/"></iframe>

</div> 
  
<div class="iframe-container" id="recipes-content">
    <iframe allowfullscreen class="video-iframe5" sandbox="allow-scripts allow-same-origin allow-forms " src="https://www.bbcgoodfood.com/recipes/"></iframe>
</div> 

<div class="iframe-container" id="earnmoney-content">
    <iframe allowfullscreen class="video-iframe6" sandbox="allow-scripts allow-same-origin allow-forms" src="https://s.3cktv.com/"></iframe>
</div> 

  
    <!-- زر "Next Episode" -->
<button id="nextEpisodeBtn" class="next-episode-btn" onclick="goBack()">
   ⏭️ Next Episode
</button>
  
   <div class="iframe-container" id="music-content">

    <iframe allowfullscreen class="video-iframe9" sandbox="allow-scripts allow-same-origin allow-forms allow-downloads" src="https://wavedancer.co.za/"></iframe>

</div>
  
    <nav class="bottom-nav">
        <div class="nav-container">
      
     <a class="nav-item" data-target="music-content" href="#">

    <i class="fas fa-music"></i>

    <span>Music</span>

    <span class="badge">5</span>

</a>
          
          
         <a class="nav-item" data-target="earnmoney-content" href="#">
    <i class="fa-solid fa-clapperboard"></i>
    <span>Series</span>
    <span class="badge">3</span>
</a>
          
        <a class="nav-item" data-target="tv-content" href="#">

    <i class="fas fa-tv"></i>

    <span>TV</span>

    <span class="badge">5</span>

</a>  
           
        <a class="nav-item" data-target="recipes-content" href="#">
    <i class="fas fa-utensils"></i>
    <span>Recipes</span>
    <span class="badge">7</span>
</a>        
            <a class="nav-item" data-target="dating-content" href="#">
                <i class="fas fa-heart"></i>
                <span>Dating</span>
                <span class="badge">3</span>
            </a>
            <a class="nav-item" data-target="football-content" href="#">
                <i class="fas fa-futbol"></i>
                <span>Football</span>
                <span class="badge">1</span>
            </a>
            <a class="nav-item" data-target="movies-content" href="#">
                <i class="fas fa-film"></i>
                <span>Movies</span>
                <span class="badge">5</span>
            </a>
            <a class="nav-item" data-target="games-content" href="#">
                <i class="fas fa-gamepad"></i>
                <span>Games</span>
                <span class="badge">2</span>
            </a>
            <a class="nav-item active" data-target="home-content" href="#">
                <i class="fas fa-home"></i>
                <span>Home</span>
                <span class="badge">4</span> <!-- Added badge for home -->
            </a>
        </div>
    </nav>

    <div class="orientation-message" id="orientationMessage">
        <p>يرجى تدوير الشاشة إلى الوضع الأفقي (Landscape) لمشاهدة الفيديو بشكل كامل.</p>
    </div>

    <div class="timer-circle" id="timer" style="display: none;"></div>
    <div class="ad-container" id="adContainer">
        <div class="loading-overlay" id="loadingOverlay">جاري التحميل...</div>
        <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen" class="ad-frame" id="adFrame" sandbox="allow-scripts allow-same-origin allow-popups allow-forms allow-top-navigation allow-top-navigation-by-user-activation"></iframe>
    </div>

    <!--Sharing System-->

 <div aria-labelledby="shareTitle" class="share-modal" id="shareModal" role="dialog">
        <div class="share-content">
            <h4 class="share-title" id="shareTitle">ادعوك لمشاهدة هذه الحلقة من مسلسل ماتنسانيش الحلقة واحد</h4>
            <div class="share-buttons">
                <button aria-label="مشاركة على واتساب" class="share-btn whatsapp" onclick="shareToWhatsApp()">
                    <i class="fab fa-whatsapp"></i>
                    <span class="tooltip">واتساب</span>
                    <div class="loading-spinner"></div>
                </button>
            </div>
            <div class="share-progress">
                <div class="progress-bar"></div>
            </div>
            <div class="success-message">
                <i class="fas fa-check-circle"></i> تمت المشاركة بنجاح
            </div>
        </div>
    </div>

    <div aria-labelledby="successTitle" class="success-modal" id="successModal" role="dialog">
        <div class="success-content">
            <div class="success-icon">🎉</div>
            <h4 class="success-title" id="successTitle">تهنينا!</h4>
            <p class="slogan">شكرا جزيلا لك الأن اصبح يمكنك مشاهدة جميع لأفلام والمسلسلات المفضلة لديك بدون إعلانات او إشتراكات مزعجة وبجودة عالية وبدون إنقطاع شكرا لك مرة اخرى.</p>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">تم استعادة الاتصال بالإنترنت</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ======== Ad System ========
        document.addEventListener('DOMContentLoaded', () => {
            const adManager = new AdManager();
        });

        class AdManager {
            constructor() {
                this.config = {
                    adDisplayInterval: 120000, // every 3 minutes (180000 milliseconds)
                    adDuration: 60000, // duration of the ad (60 seconds)
                    providers: {
                        adsterra: 'https://identicaldrench.com/di4cqzc1?key=a4afe59108ebe84706fb603d779b93c0',
                        monetag: 'https://identicaldrench.com/di4cqzc1?key=a4afe59108ebe84706fb603d779b93c0'
                    }
                };

                this.elements = {
                    timer: document.getElementById('timer'),
                    container: document.getElementById('adContainer'),
                    frame: document.getElementById('adFrame'),
                    loading: document.getElementById('loadingOverlay')
                };

                this.state = {
                    currentProvider: 'adsterra',
                    adFailures: { adsterra: 0, monetag: 0 },
                    isAdDisplayed: false
                };

                this.initializeSystem();
            }

            async initializeSystem() {
                await this.setupMonitoring();
                this.startAdCycle();
            }

            startAdCycle() {
                setInterval(() => {
                    this.displayAd();
                }, this.config.adDisplayInterval);
            }

            async displayAd() {
                if (this.state.isAdDisplayed) return;

                this.state.isAdDisplayed = true;
                this.elements.container.style.display = 'block';
                this.startTimer(this.config.adDuration / 1000);

                try {
                    await this.loadAd();
                    await this.validateAdDisplay();
                } catch (error) {
                    console.error('Ad display error:', error);
                    await this.handleAdFailure();
                }

                setTimeout(() => {
                    this.hideAd();
                }, this.config.adDuration);
            }

            async loadAd() {
                const url = this.config.providers[this.state.currentProvider];
                this.elements.frame.src = url;

                return new Promise((resolve, reject) => {
                    const timeout = setTimeout(() => {
                        this.elements.loading.style.display = 'none';
                        reject('Ad load timeout');
                    }, 10000);
                    this.elements.frame.onload = () => {
                        clearTimeout(timeout);
                        this.elements.loading.style.display = 'none';
                        resolve();
                    };
                    this.elements.frame.onerror = (error) => {
                        clearTimeout(timeout);
                        this.elements.loading.style.display = 'none';
                        reject(error);
                    };
                });
            }

            async validateAdDisplay() {
                return new Promise((resolve) => {
                    try {
                        const frameContent = this.elements.frame.contentWindow;
                        if (frameContent) {
                            resolve(true);
                        } else {
                            resolve(false);
                        }
                    } catch {
                        resolve(false);
                    }
                });
            }

            async handleAdFailure() {
                this.state.adFailures[this.state.currentProvider]++;
                
                if (this.state.adFailures[this.state.currentProvider] >= 3) {
                    this.switchProvider();
                }

                await new Promise(resolve => setTimeout(resolve, 5000)); // delay 5 seconds before retrying
                await this.retryAdLoad();
            }

            switchProvider() {
                this.elements.frame.src = '';
                this.elements.frame.src = this.config.providers[this.state.currentProvider];
                this.state.currentProvider = this.state.currentProvider === 'adsterra' ? 'monetag' : 'adsterra';
                this.state.adFailures[this.state.currentProvider] = 0;
                console.log(`Switched to ${this.state.currentProvider} provider`);
            }

            startTimer(duration) {
                this.elements.timer.style.display = 'block';
                let remaining = duration;

                const updateTimer = () => {
                    this.elements.timer.textContent = remaining;
                    if (remaining > 0) {
                        remaining--;
                        setTimeout(updateTimer, 1000);
                    }
                };

                updateTimer();
            }

            hideAd() {
                this.elements.container.style.display = 'none';
                this.elements.timer.style.display = 'none';
                this.elements.frame.src = '';
                this.elements.loading.style.display = 'block';
                this.state.isAdDisplayed = false;
            }

            async setupMonitoring() {
                setInterval(() => {
                    this.monitor();
                }, 60000);
            }

            async monitor() {
                const maxRetries = 3;
                let retries = 0;

                const monitorWithRetry = async () => {
                    try {
                        const isFrameResponsive = await this.validateAdDisplay();
                        if (!isFrameResponsive && this.state.isAdDisplayed) {
                            console.warn('Ad frame not responsive, initiating recovery...');
                            await this.handleAdFailure();
                        }
                    } catch (error) {
                        console.error('Monitoring error:', error);
                        if (retries < maxRetries) {
                            retries++;
                            console.log(`Retrying monitoring (${retries}/${maxRetries})...`);
                            setTimeout(monitorWithRetry, 5000);
                        } else {
                            console.error('Max retries reached. Stopping monitoring.');
                        }
                    }
                };

                monitorWithRetry();
            }

            async retryAdLoad() {
                try {
                    await this.loadAd();
                } catch (error) {
                    console.error('Retry failed:', error);
                }
            }
        }

        // ======== Sharing System ========
        const config = {
            shareText: 'ادعوك لمشاهدة هذه الحلقة من مسلسل ماتنسانيش الحلقة واحد',
            shareUrl: 'https://demo.playtubescript.com/',
            minShareTime: 1000,
            modalDelay: 300000,
            progressUpdateInterval: 100,
            localStorageKey: 'shareCompleted',
            shareTimeout: 5000,
            successModalDelay: 10000,
            successModalDuration: 12000,
            translationDelay: 25000
        };

        let state = {
            shareAttempts: 0,
            modalShown: false,
            shareStartTime: 0,
            shareCompleted: false,
            currentProgress: 0,
            progressInterval: null
        };

        function showLoadingSpinner(button) {
            const icon = button.querySelector('i');
            const spinner = button.querySelector('.loading-spinner');
            icon.style.display = 'none';
            spinner.style.display = 'block';
        }

        function hideLoadingSpinner(button) {
            const icon = button.querySelector('i');
            const spinner = button.querySelector('.loading-spinner');
            spinner.style.display = 'none';
            icon.style.display = 'block';
        }

        function updateProgressBar() {
            const progressBar = document.querySelector('.progress-bar');
            const timeElapsed = Date.now() - state.shareStartTime;
            const progress = Math.min((timeElapsed / config.minShareTime) * 100, 100);
            progressBar.style.width = `${progress}%`;
        }

        function showModal() {
            const modal = document.getElementById('shareModal');
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 1);
        }

        function closeModal() {
            const modal = document.getElementById('shareModal');
            modal.classList.remove('show');
            setTimeout(() => modal.style.display = 'none', 150);
            clearInterval(state.progressInterval);
        }

        function showSuccessModal() {
            const modal = document.getElementById('successModal');
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 1);

            setTimeout(() => {
                modal.classList.remove('show');
                setTimeout(() => modal.style.display = 'none', 150);
            }, config.successModalDuration);
        }

        function showSuccessMessage() {
            const message = document.querySelector('.success-message');
            message.style.display = 'block';
            setTimeout(() => {
                message.style.opacity = '0';
                setTimeout(() => {
                    message.style.display = 'none';
                    message.style.opacity = '1';
                }, 300);
            }, 2000);
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (!localStorage.getItem(config.localStorageKey)) {
                setTimeout(() => {
                    state.modalShown = true;
                    showModal();
                }, config.modalDelay);
            }

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && state.modalShown) {
                    closeModal();
                }
            });

            // منع النقر على الخلفية السوداء
            document.getElementById('shareModal').addEventListener('click', (e) => {
                if (e.target.classList.contains('share-modal')) {
                    if (!state.shareCompleted) {
                        
                    } else {
                        closeModal();
                    }
                }
            });
        });

        function validateShare(platform) {
            const timeSpent = Date.now() - state.shareStartTime;
            if (timeSpent < config.minShareTime) {
                return false;
            }

            state.shareAttempts++;
            return state.shareAttempts >= 1;
        }

        function completeShare() {
            state.shareCompleted = true;
            localStorage.setItem(config.localStorageKey, 'true');
            showSuccessMessage();
            setTimeout(() => {
                closeModal();
                setTimeout(showSuccessModal, config.successModalDelay);
            }, 1000);
        }

        async function shareToWhatsApp() {
            const button = document.querySelector('.whatsapp');
            showLoadingSpinner(button);
            state.shareStartTime = Date.now();
            
            try {
                const waUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(config.shareText + ' ' + config.shareUrl)}`;
                window.open(waUrl, '_blank');
                
                document.querySelector('.share-progress').style.display = 'block';
                state.progressInterval = setInterval(updateProgressBar, config.progressUpdateInterval);

                const checkVisibility = () => {
                    if (document.visibilityState === 'visible') {
                        setTimeout(() => {
                            hideLoadingSpinner(button);
                            clearInterval(state.progressInterval);
                            if (validateShare('whatsapp')) {
                                completeShare();
                            } else {
                                
                            }
                        }, 2000);
                        document.removeEventListener('visibilitychange', checkVisibility);
                    }
                };
                
                document.addEventListener('visibilitychange', checkVisibility);
                
                setTimeout(() => {
                    clearInterval(state.progressInterval);
                    hideLoadingSpinner(button);
                }, config.shareTimeout);
            } catch (error) {
                hideLoadingSpinner(button);
                alert('حدث خطأ أثناء المشاركة على واتساب. يرجى المحاولة مرة أخرى.');
            }
        }

        window.onbeforeunload = function() {
            if (state.modalShown && !state.shareCompleted) {
                return "يجب إكمال عملية المشاركة أولاً";
            }
        };

        const shareButtons = document.querySelectorAll('.share-btn');
        shareButtons.forEach(button => {
            button.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    button.click();
                }
            });
        });

        document.fonts.ready.then(() => {
            document.body.classList.add('fonts-loaded');
        });

        if ('connection' in navigator) {
            if (navigator.connection.saveData) {
                config.modalDelay *= 2;
            }
        }

        window.addEventListener('offline', () => {
            const buttons = document.querySelectorAll('.share-btn');
            buttons.forEach(btn => btn.disabled = true);
        });

        window.addEventListener('online', () => {
            const buttons = document.querySelectorAll('.share-btn');
            buttons.forEach(btn => btn.disabled = false);
        });

        // الترجمة التلقائية
        setTimeout(() => {
            if (typeof window.translate === 'function') {
                window.translate();
            }
        }, config.translationDelay);

          
        // Handle offline and online events
        const offlinePage = document.getElementById('offlinePage');
        const toast = document.getElementById('toast');

        function handleOffline() {
            offlinePage.style.display = 'flex';
            iframeContainers.forEach(container => container.style.display = 'none');
        }

        function handleOnline() {
            offlinePage.style.display = 'none';
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
                iframeContainers.forEach(container => {
                    if (container.classList.contains('active')) {
                        container.style.display = 'block';
                    }
                });
            }, 3000);
        }

        window.addEventListener('offline', handleOffline);
        window.addEventListener('online', handleOnline);

        // Check initial connection status
        if (!navigator.onLine) {
            handleOffline();
        }

        // Handle navigation and iframe display
const navItems = document.querySelectorAll('.nav-item');
const iframeContainers = document.querySelectorAll('.iframe-container');

navItems.forEach(item => {  
    item.addEventListener('click', (e) => {  
        e.preventDefault();  

        // Update active states  
        navItems.forEach(nav => nav.classList.remove('active'));  
        item.classList.add('active');

        // Show corresponding iframe
        const targetId = item.getAttribute('data-target');
        iframeContainers.forEach(container => {
            container.classList.remove('active');
            container.style.display = 'none';  

            if (container.id === targetId) {
                container.classList.add('active');
                container.style.display = 'block';
                container.classList.add("loading"); // ✅ تم تصحيح الخطأ هنا

                setTimeout(() => {  
                    container.classList.remove("loading");  // ✅ تصحيح هنا أيضًا
                    console.log(`✅ تم تحميل ${targetId} وإزالة الخلفية بعد 3 ثوانٍ.`);  
                }, 3000);  
            }  
        });  
    });  
});
                 

        // Handle iframe loading
        const iframes = document.querySelectorAll('.video-iframe, .video-iframe1, .video-iframe2, .video-iframe3, .video-iframe4, .video-iframe5, .video-iframe6, .video-iframe7, .video-iframe9');
        iframes.forEach(iframe => {
            iframe.addEventListener('load', () => {
                iframe.parentElement.querySelector('.loading').style.display = 'none';
            });
        });

        // Random badges for navigation items
        const badges = document.querySelectorAll('.badge');
        badges.forEach(badge => {
            badge.textContent = Math.floor(Math.random() * 10) + 1; // Random number between 1 and 10
        });

        document.addEventListener("DOMContentLoaded", function () {
    const navItems = document.querySelectorAll(".nav-item");

    navItems.forEach(item => {
        item.addEventListener("click", function () {
            const badge = this.querySelector(".badge");

            if (badge) {
                badge.style.display = "none"; // إخفاء الإشعار عند الضغط

                // إعادة إظهار الإشعار بعد وقت عشوائي بين 30 و 60 ثانية
                setTimeout(() => {
                    badge.style.display = "inline-block";
                    badge.textContent = Math.floor(Math.random() * 10) + 1;
                }, getRandomTime(30000, 60000)); // 30 إلى 60 ثانية
            }
        });
    });

    function updateBadgesRandomly() {
        document.querySelectorAll(".badge").forEach(badge => {
            if (badge.style.display !== "none") {
                // تغيير الرقم بعد وقت عشوائي مختلف لكل قسم
                setTimeout(() => {
                    badge.textContent = Math.floor(Math.random() * 10) + 1;
                }, getRandomTime(10000, 60000)); // بين 10 و 60 ثانية
            }
        });
    }

    // تحديث كل إشعار في وقت مختلف وليس في نفس اللحظة
    setInterval(updateBadgesRandomly, 60000);

    // دالة للحصول على وقت عشوائي بين حد أدنى وحد أقصى
    function getRandomTime(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
});
      
      
      
    

   
    

    
     
   
       // Check if the prompt has been shown before
        const hasPromptBeenShown = localStorage.getItem('swipeUpPromptShown');

        // Get the prompt element
        const swipeUpPrompt = document.getElementById('swipeUpPrompt');
        const mainContent = document.getElementById('mainContent');

        // If the prompt has been shown before, hide it
        if (hasPromptBeenShown) {
            swipeUpPrompt.classList.add('hide');
            mainContent.style.display = 'block';
        } else {
      // Show the prompt
            swipeUpPrompt.classList.remove('hide');
        }

        // Handle Swipe Up
        let startY;
        swipeUpPrompt.addEventListener('touchstart', (e) => {
            startY = e.touches[0].clientY;
        });
     swipeUpPrompt.addEventListener('touchend', (e) => {
            const endY = e.changedTouches[0].clientY;
            if (startY - endY > 50) { // Swipe up detected
                swipeUpPrompt.classList.add('hide');
                mainContent.style.display = 'block';

                // Save the state in localStorage
                localStorage.setItem('swipeUpPromptShown', 'true');
            }
        });

  // Scroll the page up smoothly

                window.scrollBy({

                    top: window.innerHeight, // Scroll by one screen height

                    behavior: 'smooth' // Smooth scroll

                });
      
      
        let googleAdPatterns = JSON.parse(localStorage.getItem('googleAdPatterns')) || [
            'doubleclick.net',
            'googleads',
            'adsense',
            'adservice.google.com',
            'google_ads',
            'GoogleActiveView',
            'adsbygoogle'
        ];

        function isGoogleAd(element) {
            if (element.tagName === 'IFRAME') {
                const src = element.getAttribute('src') || '';
                return googleAdPatterns.some(pattern => src.includes(pattern));
            }
            if (element.tagName === 'DIV' || element.tagName === 'INS') {
                const id = element.getAttribute('id') || '';
                const className = element.getAttribute('class') || '';
                return googleAdPatterns.some(pattern => id.includes(pattern) || className.includes(pattern));
            }
            return false;
        }

        function removeGoogleAdsInIframe(iframe) {
            try {
                const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
                const elementsToCheck = iframeDocument.querySelectorAll('iframe, div, ins');
                elementsToCheck.forEach(element => {
                    if (isGoogleAd(element)) {
                        element.remove();
                    }
                });
                iframeDocument.querySelectorAll('iframe').forEach(nestedIframe => {
                    removeGoogleAdsInIframe(nestedIframe);
                });
            } catch (e) {
                console.warn('Cannot access iframe content due to CORS policy.');
            }
        }

        function observeIframeDOMChanges(iframe) {
            try {
                const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
                const observer = new MutationObserver((mutationsList) => {
                    for (const mutation of mutationsList) {
                        if (mutation.type === 'childList') {
                            mutation.addedNodes.forEach(node => {
                                if (node.nodeType === Node.ELEMENT_NODE) {
                                    if (isGoogleAd(node)) {
                                        node.remove();
                                    }
                                    node.querySelectorAll('iframe, div, ins').forEach(element => {
                                        if (isGoogleAd(element)) {
                                            element.remove();
                                        }
                                    });
                                }
                            });
                        }
                    }
                });
                observer.observe(iframeDocument.body, { childList: true, subtree: true });
            } catch (e) {
                console.warn('Cannot access iframe content due to CORS policy.');
            }
        }

        function startIframeAdBlockerBot(iframe) {
            setInterval(() => {
                removeGoogleAdsInIframe(iframe);
            }, 2000);
        }

        function autoDetectGoogleAdPatternsInIframe(iframe) {
            try {
                const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
                const elementsToCheck = iframeDocument.querySelectorAll('iframe, div, ins');
                elementsToCheck.forEach(element => {
                    if (element.tagName === 'IFRAME') {
                        const src = element.getAttribute('src') || '';
                        if (src.includes('google') && !googleAdPatterns.some(pattern => src.includes(pattern))) {
                            googleAdPatterns.push(src);
                            localStorage.setItem('googleAdPatterns', JSON.stringify(googleAdPatterns));
                        }
                    }
                    if (element.tagName === 'DIV' || element.tagName === 'INS') {
                        const id = element.getAttribute('id') || '';
                        const className = element.getAttribute('class') || '';
                        if ((id.includes('google') || className.includes('google')) && !googleAdPatterns.some(pattern => id.includes(pattern) || className.includes(pattern))) {
                            googleAdPatterns.push(id, className);
                            localStorage.setItem('googleAdPatterns', JSON.stringify(googleAdPatterns));
                        }
                    }
                });
            } catch (e) {
                console.warn('Cannot access iframe content due to CORS policy.');
            }
        }

        window.onload = () => {
            const iframe = document.querySelector('.video-iframe4');
            if (iframe) {
                removeGoogleAdsInIframe(iframe);
                observeIframeDOMChanges(iframe);
                startIframeAdBlockerBot(iframe);
                autoDetectGoogleAdPatternsInIframe(iframe);
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const iframe = document.querySelector('.video-iframe4');
            if (iframe) {
                removeGoogleAdsInIframe(iframe);
                observeIframeDOMChanges(iframe);
                startIframeAdBlockerBot(iframe);
                autoDetectGoogleAdPatternsInIframe(iframe);
            }
        });
        
    
  
        
 document.addEventListener("DOMContentLoaded", function () {
    const nextEpisodeBtn = document.getElementById("nextEpisodeBtn");
    const earnIframe = document.querySelector("#earnmoney-content iframe");
    const earnSection = document.getElementById("earnmoney-content");

    let elapsedTime = sessionStorage.getItem("earnElapsedTime") ? parseInt(sessionStorage.getItem("earnElapsedTime"), 10) : 0;
    let previousURLs = JSON.parse(sessionStorage.getItem("earnHistory")) || [];
    
    const firstAppearance = 15 * 1000; // 45 دقيقة
    const repeatInterval = 3 * 60 * 1000; // 3 دقائق
    const displayDuration = 25 * 1000; // 25 ثانية
    const maxDuration = 195 * 60 * 1000; // 3 ساعات وربع
    let timer;
    
    function showNextEpisodeButton() {
        if (earnSection.style.display === "block") { // ✅ يظهر الزر فقط إذا كان المستخدم داخل القسم
            nextEpisodeBtn.style.display = "block";
            console.log(`✅ [${elapsedTime / 60000} دقيقة] زر 'Next Episode' ظهر للمستخدم`);
            
            setTimeout(() => {
                nextEpisodeBtn.style.display = "none";
                console.log(`❌ [${elapsedTime / 60000} دقيقة] زر 'Next Episode' اختفى`);
            }, displayDuration);
        }
    }

    function startNextEpisodeTimer() {
        console.log("⏳ بدأ عداد وقت قسم Earn...");
        timer = setInterval(() => {
            elapsedTime += 1000;
            sessionStorage.setItem("earnElapsedTime", elapsedTime);

            if (elapsedTime >= firstAppearance) {
                if ((elapsedTime - firstAppearance) % repeatInterval === 0) {
                    showNextEpisodeButton();
                }
            }

            if (elapsedTime >= maxDuration) {
                console.log("🔄 إعادة تشغيل دورة زر 'Next Episode'");
                elapsedTime = 0;
                sessionStorage.setItem("earnElapsedTime", elapsedTime);
                sessionStorage.setItem("earnHistory", JSON.stringify([]));
            }
        }, 1000);
    }

    function goBack() {
        if (previousURLs.length > 0) {
            const lastURL = previousURLs.pop();
            sessionStorage.setItem("earnHistory", JSON.stringify(previousURLs));
            earnIframe.src = lastURL;
            console.log(`↩️ المستخدم ضغط على زر 'Next Episode' وتم الرجوع إلى: ${lastURL}`);
        } else {
            console.warn("⚠️ لا يوجد سجل للرجوع إليه!");
        }
    }

    nextEpisodeBtn.addEventListener("click", goBack);

    // حفظ كل رابط جديد يزوره المستخدم داخل `iframe`
    setInterval(() => {
        if (earnIframe.src !== previousURLs[previousURLs.length - 1]) {
            previousURLs.push(earnIframe.src);
            sessionStorage.setItem("earnHistory", JSON.stringify(previousURLs));
            console.log(`📌 تمت إضافة رابط جديد إلى سجل التنقل: ${earnIframe.src}`);
        }
    }, 5000);

    // تشغيل المؤقت فقط عندما يدخل المستخدم إلى قسم Earn Money
    document.querySelector("[data-target='earnmoney-content']").addEventListener("click", function () {
        if (!timer) {
            startNextEpisodeTimer();
        }
    });

    // ✅ إخفاء الزر فورًا عند مغادرة المستخدم لقسم Earn Money
    document.querySelectorAll(".nav-item").forEach(item => {
        item.addEventListener("click", function () {
            if (item.getAttribute("data-target") !== "earnmoney-content") {
                nextEpisodeBtn.style.display = "none";
                console.log("❌ تم إخفاء زر 'Next Episode' لأن المستخدم غادر قسم Earn Money");
            }
        });
    });
});
            

    
 
 
           
    </script>

   <!-- Bootstrap JS (Optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
 
  
  
</body>
</html>
